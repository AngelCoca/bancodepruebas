<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Page Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="recursos/csslogin.css" />
    <script src="recursos/validador.js"></script>
    <script src="recursos/funciones.js"></script>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>
<body>

    <script>

        function botonEnviar(){
            
            var email = document.getElementById("input-nombre-login").value;
            var contra = document.getElementById("input-contrasenya-login").value;

            var idLleno = comprobarCampoLleno(email);
            var contraLlena = comprobarCampoLleno(contra);


            if(idLleno && contraLlena){
                document.getElementById("mensaje-error").innerHTML = ""

                //Comprueba que el correo electronico contiene @
                var emailValido = comprobarEmailValido(email);

                if(emailValido){
                    //Comprueaba que la contraseña tiene  9 carácteres
                    var contraValida = comprobarContraValida(contra);

                    if(contraValida){
                        //Obtiene el correo electrónico y la contraseña y comprueba que existe un profesor con esos datos
                        var existeUsuario = comprobarUsuarioProfesor(email, contra);

                        if(existeUsuario == "Correcto"){
                  
                            var idProfesor = obtenerIDProfesor();
                            this.close();

                        } else {
                            document.getElementById("mensaje-error").innerHTML = ""
                            document.getElementById("mensaje-error").innerHTML = existeUsuario;
                        }

                    } else {
                        document.getElementById("mensaje-error").innerHTML = "Contraseña no válido. Debe tener más de 8 carácteres<br>"
                    }

                } else {
                    document.getElementById("mensaje-error").innerHTML = "Email no válido. Email: Debe contener '@'. <br>"

                }

            } else {
                document.getElementById("mensaje-error").innerHTML = "Existen campos vacíos."
            }
        }
    </script>
        <div class="container">
                <div class="row">
                    <div class="col-sm-6 col-md-4 col-md-offset-4">
                        <div class="account-wall">
                            <img class="profile-img" src="recursos/imagenes/logoIES.png"
                                alt="IES Mare Nostrum">
                            <form class="form-signin">
                            <input type="text" id="input-nombre-login" class="form-control" placeholder="Email" required autofocus>
                            <input type="password" id="input-contrasenya-login" class="form-control" placeholder="Contraseña" required>
                            <button class="btn btn-lg btn-primary btn-block"  onclick="botonEnviar()" type="button">
                                Acceder
                            </button>
                            <p id="mensaje-error" class="estilo-mensaje-error"></p>
                            </form>
                        </div>
                       
                    </div>
                </div>
            </div>
</body>
</html>